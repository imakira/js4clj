<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>Usage</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">net.coruscation.js4clj</span> <span class="project-version"></span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1  current"><a href="intro.html"><div class="inner"><span>Usage</span></div></a></li><li class="depth-1 "><a href="multithread-and-context-management.html"><div class="inner"><span>Multithread and JavaScript Context Management</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>net</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>coruscation</span></div></div></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>js4clj</span></div></div></li><li class="depth-4"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>api</span></div></div></li><li class="depth-5"><a href="net.coruscation.js4clj.api.polyglot.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>polyglot</span></div></a></li><li class="depth-4 branch"><a href="net.coruscation.js4clj.context.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>context</span></div></a></li><li class="depth-4 branch"><a href="net.coruscation.js4clj.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-4 branch"><a href="net.coruscation.js4clj.embedding.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>embedding</span></div></a></li><li class="depth-4 branch"><a href="net.coruscation.js4clj.js.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>js</span></div></a></li><li class="depth-4 branch"><a href="net.coruscation.js4clj.require.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>require</span></div></a></li><li class="depth-4"><a href="net.coruscation.js4clj.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li></ul></div><div class="document" id="content"><div class="doc"><div class="markdown"><h1><a href="#usage" id="usage"></a>Usage</h1>
<h1><a href="#prerequisite-installation" id="prerequisite-installation"></a>Prerequisite &amp; Installation</h1>
<p>TODO</p>
<p><a id="org71358e7"></a></p>
<h1><a href="#usage" id="usage"></a>Usage</h1>
<p><a id="org0757d24"></a></p>
<h2><a href="#requiring-namespaces" id="requiring-namespaces"></a>Requiring Namespaces</h2>
<pre><code class="language-clojure">(ns net.coruscation.js4clj.example
  (:require
   [net.coruscation.js4clj.require :refer [require-js]]
   [net.coruscation.js4clj.utils :refer [js. js.- js.. clj-&gt;js js-&gt;clj js-set!]]
   [net.coruscation.js4clj.core :refer [js-new]]
   [net.coruscation.js4clj.js :as js]))
</code></pre>
<p><a id="orgea97a50"></a></p>
<h2><a href="#using-javascript-libraries" id="using-javascript-libraries"></a>Using JavaScript Libraries</h2>
<p>Install JavaScript libraries in the project root using npm like usual.</p>
<pre><code class="language-bash">npm init
npm i luxon # luxon as an example
</code></pre>
<pre><code class="language-clojure">;; we can use luxon as a namespace now, for example: luxon/DateTime
(require-js '["luxon" :as luxon])
</code></pre>
<p><a id="orgf88f3b7"></a></p>
<h2><a href="#converting-data-between-clojure-and-javascript" id="converting-data-between-clojure-and-javascript"></a>Converting data between Clojure and JavaScript</h2>
<p>This library provides two functions similar to those of ClojureScript: <code>js-&gt;clj</code> and <code>clj-&gt;js</code>.</p>
<pre><code class="language-clojure">;; result: #object[org.graalvm.polyglot.Value 0x22b60c71 "{key: \"value\"}"]
(def js-obj (clj-&gt;js {:key "value"}))
;; result: {:key "value"}
(js-&gt;clj js-obj :keywordize-keys true) 
</code></pre>
<p><a id="orgbbec24a"></a></p>
<h2><a href="#calling-javascript-functions-getset-javascript-properties" id="calling-javascript-functions-getset-javascript-properties"></a>Calling JavaScript functions, get/set JavaScript properties</h2>
<p>Similar to ClojureScript, this libraries provides four macros: <code>js.</code> <code>js.-</code> <code>js..</code> and <code>js-set!</code></p>
<p>We can use <code>js.</code> to call a method of an Object.</p>
<pre><code class="language-clojure">(def current-time (js. luxon/DateTime now))
;; result: "2025-11-27T23:27:34.853+08:00"
(js. current-time toString) 
</code></pre>
<p>We can use <code>js.-</code> to access properties of an object.</p>
<pre><code class="language-clojure">;; result: "value"
(js.- (clj-&gt;js {:key "value"})
      key) 
</code></pre>
<p>We can also use <code>js..</code> to chain the calling</p>
<pre><code class="language-clojure">(js.. luxon/DateTime now toString)
</code></pre>
<p>We can also use <code>js..</code> to access property by using <code>-</code> as a prefix:</p>
<pre><code class="language-clojure">(js.. luxon/DateTime
  (fromObject (clj-&gt;js {:day 22}))
  (plus (clj-&gt;js {:day 1}))
  ;; results: 23
  -day) 
</code></pre>
<p>The library also provides a <code>js-set!</code>, it must be used along with <code>js.-</code> or <code>js..</code>.</p>
<pre><code class="language-clojure">(let [obj (clj-&gt;js {})]
  (js-set! (js.- obj key)
           "value")

  (js.- obj key) ;; "value"

  (js-set! (js.. obj -key)
           "new value")
  (js.- obj key) ;; "new value"
  )
</code></pre>
<p><a id="orgd8c1da3"></a></p>
<h1><a href="#examples" id="examples"></a>Examples</h1>
<p>You can check this <a href="https://github.com/imakira/js4clj/tree/master/example/js4clj">minimal Server Side Rendering with Client Side Rehydration example using react</a>.</p>
<p><a id="orgdada725"></a></p>
<h1><a href="#links" id="links"></a>Links</h1>
<p>This project is inspired by:</p>
<ul>
<li><a href="https://github.com/clj-python/libpython-clj">libpython-clj</a></li>
<li><a href="https://github.com/plandes/clj-py4j">py4clj</a></li>
</ul>
<p>Check this blog about roughly how it is done <a href="https://coruscation.net/blogs/experiment-with-graalvm--clojure--and-javascript.html">Experiment with GraalVM, Clojure, and JavaScript.</a></p>
</div></div></div></body></html>